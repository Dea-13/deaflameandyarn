<div *blockUI="'block'" class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <section class="users-list-wrapper">
      <div class="card">
        <div class="row">
          <div class="col-12">
            <mat-accordion multi>
              <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                  <div class="row col-12" (click)="$event.stopPropagation();">

                    <div class="col-lg-5 col-12">
                      <div class="d-flex align-items-center">
                        <button rippleEffect (click)="size = size + 1" class="btn size-btn text-primary p-0" [disabled]="size >= 22">A<span [data-feather]="'zoom-in'" [class]="'ficon'"></span></button>
                        <span class="pt-line-3">|</span>
                        <button rippleEffect (click)="size = size - 1" class="btn size-btn text-primary p-0" [disabled]="size <= 8">A<span [data-feather]="'zoom-out'" [class]="'ficon'"></span></button>
                        <button rippleEffect (click)="clearAll()" class="btn size-btn m-0 mx-2 text-primary p-0">{{ translateSnackBar.clearAll }}</button>
                        <ng-select [virtualScroll]="true" appendTo="body"  [clearable]="false" [(ngModel)]="limit" (change)="pageChanged(1)">
                          <ng-option [value]="10">10</ng-option>
                          <ng-option [value]="15">15</ng-option>
                          <ng-option [value]="20">20</ng-option>
                          <ng-option [value]="25">25</ng-option>
                          <ng-option [value]="50">50</ng-option>
                          <ng-option [value]="100">100</ng-option>
                        </ng-select>
                        <label class="d-flex align-items-center ml-1">
                          {{ translateSnackBar.result }}
                        </label>
                      </div>
                    </div>

                    <div class="col-lg-7 col-12">
                      <div class="row col-12 align-items-center  justify-content-start">
                        <div class="col-12 col-lg-8">
                          <div class="row">
                            <div class="col-12 col-md-4 col-lg-6 text-end filters-header">{{ translateSnackBar.lastRefreshed }}: </div>
                            <div class="col-12 col-md-4 col-lg-6 filters-header">{{ refreshed | date:'dd/MM/yyyy H:mm:ss'}}</div>
                          </div>
                        </div>
                        <div class="col-12 col-lg-4">
                          <div class="d-flex align-items-center justify-content-lg-end pr-1 pb-1 pb-md-0">
                            <button class="btn btn-primary ml-1" rippleEffect (click)="modalProfile('new')">
                              <i data-feather="plus" class="d-sm-none d-inline-block mr-0 mr-sm-1"></i>
                              <span class="d-none d-sm-inline-block"> {{ translateSnackBar.modalProfile }} </span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                </mat-expansion-panel-header>
                <div class="row">
                  <div class="filters-column border card d-block" *ngFor="let f of arrFilters">
                    <div class="row">
                      <div class="col-12 header-filter">
                        {{ f.name }}
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <button class="btn btn-outline-primary" type="button" rippleEffect>
                            <i data-feather="search"></i>
                          </button>
                        </div>
                        <input type="search" class="form-control dt-uname" [(ngModel)]="f.searchFilterConf" #search
                              (keyup.enter)="searchFilter($event, f.selectAll, f.filter, f.temp, f.ind)" required />
                        <div class="input-group-append">
                          <button class="btn btn-outline-primary" type="button" (click)="clearFilter(f.fullFilter, f.ind)" placement="top" container="body" rippleEffect>
                            <span [data-feather]="'x-circle'" [class]="'cursor-pointer'"></span>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 box-filter">

                    <div >
                      <div class="col-12 text-center" *ngIf="f.filter.length === 0">
                        {{ translateSnackBar.noResult }}
                      </div>
                      <section *ngIf="f.filter.length > 0" class="example-section">
                        <span class="example-list-section">
                          <mat-checkbox class="example-margin"
                            [(ngModel)]="f.selectAll" [checked]="f.selectAll"
                            color="primary"
                            (change)="setAll($event.checked, f.selectAll, f.filter, f.ind)">
                            {{ translateSnackBar.selected }}
                          </mat-checkbox>
                        </span>
                        <span class="example-list-section">
                            <ul (scrolled)="onScroll(f.selectAll, f.filter, f.ind)" [infiniteScrollDistance]="0.1" [scrollWindow]="false" class="inf-scroll"
                            infiniteScroll>
                              <li *ngFor="let t of f.filter">
                                <mat-checkbox [(ngModel)]="t.checked" color="primary"
                                  (ngModelChange)="updateAllComplete(f.selectAll, f.filter, f.ind)">
                                  {{t.name}}
                                </mat-checkbox>
                              </li>
                            </ul>
                        </span>
                      </section>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
        <section class="example-container mat-elevation-z8">
          <table mat-table
            [dataSource]="rows | paginate: { id: 'paginationId', itemsPerPage: limit, currentPage: cPage, totalItems: totalResult }"
             class="example-table">
            <!-- Position Column -->
            <ng-container matColumnDef="profileName">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.profileName">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.profileTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 0)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element" class="min-w-100"><span [ngStyle]="{'font-size': size + 'px'}">{{element.profileName}}</span></td>
            </ng-container>

            <ng-container matColumnDef="groupCode">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.groupCode">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.groupCodeTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 1)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element" class="min-w-100"><span [ngStyle]="{'font-size': size + 'px'}">{{element.groupCode}}</span></td>
            </ng-container>

            <ng-container matColumnDef="section">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.section">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.sectionTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 2)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.section}}</span></td>
            </ng-container>

            <ng-container matColumnDef="perimeter">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.perimeter">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.perimeterTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 3)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.perimeter}}</span></td>
            </ng-container>

            <ng-container matColumnDef="grM">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.grM">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.grMTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 4)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.grM}}</span></td>
            </ng-container>

            <ng-container matColumnDef="primaryPress">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.primaryPress">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.primaryPressTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 5)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.primaryPress}}</span></td>
            </ng-container>

            <ng-container matColumnDef="alternativePress">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.alternativePress">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.alternativePressTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 6)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.alternativePress}}</span></td>
            </ng-container>

            <ng-container matColumnDef="size1">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.size1">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.size1Table }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 7)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.size1}}</span></td>
            </ng-container>

            <ng-container matColumnDef="size2">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.size2">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.size2Table }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 8)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.size2}}</span></td>
            </ng-container>

            <ng-container matColumnDef="size3">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.size3">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.size3Table }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 9)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.size3}}</span></td>
            </ng-container>

            <ng-container matColumnDef="size4">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.size4">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.size4Table }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 10)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.size4}}</span></td>
            </ng-container>

            <ng-container matColumnDef="usage">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.usage">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.usageTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 11)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.usage}}</span></td>
            </ng-container>

            <ng-container matColumnDef="extrusionSpeed">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.extrusionSpeed">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.extrusionSpeedTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 12)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.extrusionSpeed}}</span></td>
            </ng-container>

            <ng-container matColumnDef="extrusionSpeedSms">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.extrusionSpeedSms">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.extrusionSpeedSmsTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 13)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.extrusionSpeedSMS}}</span></td>
            </ng-container>

            <ng-container matColumnDef="opPerf">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.opPerf">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.opPerfTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 14)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.opPerf}}</span></td>
            </ng-container>

            <ng-container matColumnDef="tbillet">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.tbillet">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.tbilletTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 15)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.tbillet}}</span></td>
            </ng-container>

            <ng-container matColumnDef="tExit">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.tExit">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.tExitTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 16)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.tExit}}</span></td>
            </ng-container>

            <ng-container matColumnDef="puller">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.puller">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.pullerTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 17)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.puller}}</span></td>
            </ng-container>

            <ng-container matColumnDef="scrapStart">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.scrapStart">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.scrapStartTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 18)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.scrapStart}}</span></td>
            </ng-container>

            <ng-container matColumnDef="scrapStartSms">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.scrapStartSms">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.scrapStartSmsTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 19)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.scrapStartSms}}</span></td>
            </ng-container>

            <ng-container matColumnDef="scrapEnd">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.scrapEnd">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.scrapEndTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 20)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.scrapEnd}}</span></td>
            </ng-container>

            <ng-container matColumnDef="cooling">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.cooling">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.coolingTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 21)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.cooling}}</span></td>
            </ng-container>

            <ng-container matColumnDef="coolingSms">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.coolingSms">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.coolingSmsTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 22)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.coolingSms}}</span></td>
            </ng-container>

            <ng-container matColumnDef="coolingAdd">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.coolingAdd">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.coolingAddTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 23)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.coolingAdd}}</span></td>
            </ng-container>

            <ng-container matColumnDef="basketOrdering">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.basketOrdering">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.basketOrderingTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 24)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.basketOrdering}}</span></td>
            </ng-container>

            <ng-container matColumnDef="notesExtrusion">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.notesExtrusion">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.notesExtrusionTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 25)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element"><span [ngStyle]="{'font-size': size + 'px'}">{{element.notesExtrusion}}</span></td>
            </ng-container>

            <ng-container matColumnDef="important">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.important">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.importantTable }}</span>
                <button type="button" class="btn order-btn" (click)="sortType(!orderType, 26)">
                  <i class="fa fa-sort"></i>
                </button>
              </th>
              <td mat-cell *matCellDef="let element" class="min-w-100"><span [ngStyle]="{'font-size': size + 'px'}">{{element.important}}</span></td>
            </ng-container>

            <ng-container matColumnDef="inUse">
              <th mat-header-cell *matHeaderCellDef placement="top-left" container="body" [ngbTooltip]="translateSnackBar.inUse">
                <span class="th-header" [ngStyle]="{'font-size': size + 'px'}">{{ translateSnackBar.inUseTable }}</span>
              </th>
              <td mat-cell *matCellDef="let element">
                <input class="form-control input" [(ngModel)]="element.inUse" type="checkbox">
              </td>
            </ng-container>

            <ng-container matColumnDef="star" stickyEnd>
              <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
              <td mat-cell *matCellDef="let element">
                <div ngbDropdown container="body">
                  <button ngbDropdownToggle type="button" (click)="$event.stopPropagation()" class="btn icon-btn btn-sm hide-arrow" rippleEffect>
                    <span [data-feather]="'more-vertical'" [class]="'cursor-pointer'"></span>
                  </button>
                  <div ngbDropdownMenu>
                    <a (click)="modalProfile(element)" ngbDropdownItem>
                      <span [data-feather]="'edit'" [size]="16" [class]="'mr-50'"></span>
                      {{ translateSnackBar.edit }}
                    </a>
                    <a (click)="deleteProfile(element)" href="javascript:;" ngbDropdownItem>
                      <span [data-feather]="'trash'" [size]="16" [class]="'mr-50'"></span>
                      {{ translateSnackBar.delete }}
                    </a>
                  </div>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row (click)="modalProfile(row)" *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </section>


        <pagination-controls id="paginationId" previousLabel="&lsaquo;" nextLabel="&rsaquo;"
          (pageChange)="pageChanged($event)">
        </pagination-controls>
      </div>
    </section>
  </div>
</div>
