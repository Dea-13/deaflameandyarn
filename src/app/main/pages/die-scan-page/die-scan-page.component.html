<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <div class="card">

      <div class="col-sm-12 flex">
        <div class="col-sm-2 d-flex justify-content-between align-items-center"><label>{{ translateSnackBar.workPlace
            }}</label></div>
        <div class="full-width">
          <div class="col-sm-12 colored flex">
            <!-- <span class="d-flex justify-content-between align-items-center pointer">
              <i data-feather="refresh-cw" class="mr-25 refresh-btn" title="Delete"></i>
            </span> -->
            <span [data-feather]="'refresh-cw'" [class]="'refresh-btn'"></span>
            <div class="col-sm-4 d-flex align-items-center">
              <label class="d-flex align-items-center">{{ translateSnackBar.resourceReporting }}</label>
              <ng-select appendTo="body" class="w-50-select" [(ngModel)]="resourceIn" [clearable]="false"
                (change)="getMovements(resourceIn)">
                <ng-option *ngFor="let r of resource" [value]="r.resourceId">{{r.resourceName}}</ng-option>
              </ng-select>
            </div>
            <div class="col-sm-5 d-flex align-items-center">
              <label class="d-flex align-items-center">{{ translateSnackBar.directionReporting }}</label>
              <ng-select appendTo="body" class="w-50-select" [clearable]="false">
                <ng-option>{{ translateSnackBar.incomingReport }}</ng-option>
                <ng-option>{{ translateSnackBar.outgoingReporting }}</ng-option>
              </ng-select>
            </div>
          </div>
        </div>
      </div>

      <div class="col-sm-12 flex">
        <div class="col-sm-2 justify-content-between align-items-center block padd-img">
          <label>{{ translateSnackBar.scanning }}</label>
          <img *ngIf="image.name !== ''" class="center-img" src="{{'data:image/png;base64,' + image.name}}">
        </div>
        <div class="full-width">
          <div class="flex boxes">
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.barcodeMatrix }}</label>
              <input type="number" [(ngModel)]="barCode" (input)="getBarCodesTable()" class="form-control dt-uname" />
              <button type="button" class="btn btn-primary btn-view" (click)="openBarCodeModal('empty')" rippleEffect>
                {{ translateSnackBar.view }}
              </button>
            </div>
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.currentResource }}</label>
              <ng-select appendTo="body" class="" [(ngModel)]="currentResource" [clearable]="false">
                <ng-option *ngFor="let r of resource" [value]="r.resourceId">{{r.resourceName}}</ng-option>
              </ng-select>
            </div>
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.productionKg }}</label>
              <input class="form-control input" type="text">
            </div>
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.notes }}</label>
              <input class="form-control input" type="text">
            </div>
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.employee }}</label>
              <ng-select appendTo="body" class="" [clearable]="false">
                <ng-option *ngFor="let e of employee" [value]="e.id">{{e.name}}</ng-option>
              </ng-select>
            </div>
            <div class="col-sm-2 align-items-center fixed-height">
              <label class="d-flex align-items-center">{{ translateSnackBar.confirmation }}</label>
              <span [data-feather]="'check-circle'" [class]="'check-btn'"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="col-sm-12 flex">
        <div class="col-sm-2 justify-content-between align-items-center block padd-img">
          <label>{{ translateSnackBar.last20Movements }}</label>
          <img *ngIf="imageLastMovement.name !== ''" class="center-img" src="{{'data:image/png;base64,' + imageLastMovement.name}}">
        </div>
        <div class="col-sm-10 fixed-height">
          <table mat-table [dataSource]="rowsMovements" class="example-table">
            <!-- Position Column -->
            <ng-container matColumnDef="dieId">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.dieId }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.dieId}}</td>
            </ng-container>

            <ng-container matColumnDef="resourceIn">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.resourceIn }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.resourceIn}}</td>
            </ng-container>

            <ng-container matColumnDef="resourceOut">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.resourceOut }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.resourceOut}}</td>
            </ng-container>

            <ng-container matColumnDef="movementDateTime">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.movementDateTime }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.movementDateTime | date:'dd/MM/yyyy H:mm:ss'}}</td>
            </ng-container>

            <ng-container matColumnDef="notes">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.notes }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.notes}}</td>
            </ng-container>

            <ng-container matColumnDef="computerName">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body"></div>
                <!-- <span class="th-header">{{ translateSnackBar.computerName }}</span> -->
              </th>
              <td mat-cell *matCellDef="let element">{{element.computerName}}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row (click)="lastMovementRow(row)" *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </div>

      <div class="col-sm-12 flex">
        <div class="col-sm-2 d-flex justify-content-between align-items-center"><label>{{
            translateSnackBar.positionMatrix }}</label></div>
        <div class="col-sm-10 fixed-height">
          <table mat-table [dataSource]="rowsDie" class="example-table">
            <!-- Position Column -->
            <ng-container matColumnDef="matrix">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body">
                  <button [matMenuTriggerFor]="menuFilter" type="button" class="btn icon-btn btn-sm hide-arrow"
                    rippleEffect>
                    <span [data-feather]="'filter'" [class]="'cursor-pointer'"></span>
                  </button>
                  <mat-menu #menuFilter="matMenu">
                    <ng-select (click)="$event.stopPropagation()" appendTo="body" class="select-table width-select"
                      [multiple]="true" [closeOnSelect]="false">
                      <!-- <ng-option *ngFor="let t of nameArr" [value]="t.name">{{ t.name }}
                    </ng-option> -->
                    </ng-select>
                  </mat-menu>
                </div>
                <span class="th-header">{{ translateSnackBar.matrix }}</span>
              </th>
              <td mat-cell *matCellDef="let element">{{element.matrix}}</td>
            </ng-container>

            <ng-container matColumnDef="skladPlace">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body">
                  <button [matMenuTriggerFor]="menuFilter" type="button" class="btn icon-btn btn-sm hide-arrow"
                    rippleEffect>
                    <span [data-feather]="'filter'" [class]="'cursor-pointer'"></span>
                  </button>
                  <mat-menu #menuFilter="matMenu">
                    <ng-select (click)="$event.stopPropagation()" appendTo="body" class="select-table width-select"
                      [multiple]="true" [closeOnSelect]="false">
                      <!-- <ng-option *ngFor="let t of departmentArr" [value]="t.name">{{ t.name }}
                    </ng-option> -->
                    </ng-select>
                  </mat-menu>
                </div>
                <span class="th-header">{{ translateSnackBar.skladPlace }}</span>
              </th>
              <td mat-cell *matCellDef="let element">{{element.skladPlace}}</td>
            </ng-container>

            <ng-container matColumnDef="lastTransaction">
              <th mat-header-cell *matHeaderCellDef>
                <div class="filter-th" container="body">
                  <button [matMenuTriggerFor]="menuFilter" type="button" class="btn icon-btn btn-sm hide-arrow"
                    rippleEffect>
                    <span [data-feather]="'filter'" [class]="'cursor-pointer'"></span>
                  </button>
                  <mat-menu #menuFilter="matMenu">
                    <ng-select (click)="$event.stopPropagation()" appendTo="body" class="select-table width-select"
                      [multiple]="true" [closeOnSelect]="false">
                      <!-- <ng-option *ngFor="let t of priviligeArr" [value]="t.name">{{ t.name }}
                    </ng-option> -->
                    </ng-select>
                  </mat-menu>
                </div>
                <span class="th-header">{{ translateSnackBar.lastTransaction }}</span>
              </th>
              <td mat-cell *matCellDef="let element">{{element.lastTransaction}}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsDie"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsDie;"></tr>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="loading" class="loader-section">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>
